<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DnD Map Editor</title>

  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet" />

  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/rpg-awesome.min.css">

    <!-- Include WindowManager before other scripts -->
    <!-- <script src="js/classes/WindowManager.js"></script> -->

  <!-- Load Shoelace components -->
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/themes/dark.css"> -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/themes/light.css" />

  <script src="https://kit.fontawesome.com/187c1afb2a.js" crossorigin="anonymous"></script>
  
  <!-- Load required Shoelace components -->
  <script type="module">
    import { setBasePath } from "https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/utilities/base-path.js";
    setBasePath(
      "https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/"
    );
  </script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/button/button.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/button-group/button-group.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/dialog/dialog.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/drawer/drawer.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/icon/icon.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/input/input.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/tooltip/tooltip.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/tab/tab.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/tab-group/tab-group.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/tab-panel/tab-panel.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/drawer/drawer.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/progress-bar/progress-bar.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/radio/radio.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/radio-group/radio-group.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/checkbox/checkbox.js"></script>

  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/select/select.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/option/option.js"></script>
  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.12.0/cdn/components/range/range.js"></script>

  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/components/switch/switch.js"></script>

  <script type="module"
    src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/components/alert/alert.js"></script>
  <!-- html2canvas-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- Three.js  r128, needs it's one pointerlockcontrols-->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/PointerLockControls.js"></script> -->

  <!-- working also 138.8-->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.138.3/three.min.js"></script>

  <!-- working 148 -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.148.0/three.min.js"></script>

  <!-- 158 works, colors slightly washed out-->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.158.0/three.min.js"></script> -->

  <!-- 160.1 last working version i three.min.js file format-->
  <!-- colors still look washed out-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.1/three.min.js"></script>

  <!-- this is pretty much universal, keep it here-->
  <script src="https://cdn.jsdelivr.net/npm/three@0.138.0/examples/js/controls/PointerLockControls.js"></script>

  <!-- fps counter -->
  <!-- <script src="https://mrdoob.github.io/stats.js/build/stats.min.js"></script> -->


  <!-- Core Dependencies -->
  <script src="js/classes/Token.js"></script>
  <script src="js/classes/Room.js"></script>

  <!-- Resource Management -->
  <script src="js/classes/resource-manager.js"></script>
  <script src="js/classes/texture-manager.js"></script>

  <!-- UI and Control Classes -->
  <script src="js/classes/LayersPanel.js"></script>
  <!-- Physics -->
  <script src="js/classes/PhysicsController.js"></script>

  <!-- Add post-processing scripts -->
  <script src="js/classes/VisualEffectsManager.js"></script>
  <script src="js/classes/day-night-cycle.js"></script>
  <script src="js/classes/Scene3DController.js"></script>
  <script src="js/classes/MonsterManager.js"></script>

  <!-- Main Editor Class -->
  <script src="js/classes/MapEditor.js"></script>

  <!-- Add party and combat systems -->
  <script src="js/classes/PartyManager.js"></script>
  <script src="js/classes/CombatSystem.js"></script>

  <!-- fps-->
  <script src="js/libs/stats.min.js"></script>

  <!-- Initialize Everything -->
  <script src="js/main.js"></script>


</head>

<body>
  <div class="app-container">

    <header class="header">
      <!-- File Operations Group -->
      <sl-button-group>
        <sl-tooltip content="Open Maps" placement="right-top">
          <sl-button size="medium" variant="success" outline id="openMapBtn">
            <span class="material-icons">map</span>
          </sl-button>
        </sl-tooltip>
        <sl-tooltip content="Save Project" placement="right-top">
          <sl-button size="medium" variant="success" outline id="saveProjectBtn">
            <span class="material-icons">save</span>
          </sl-button>
        </sl-tooltip>
      </sl-button-group>

      <!-- Central Title -->
      <div class="header-title" id="mapTitle">
        <span id="mapTitleText">MapEd 3d</span>
        <span class="material-icons header-title-edit">edit</span>
      </div>

      <!-- Tools Group -->
      <sl-button-group style="margin-left: auto;">
        <sl-tooltip content="Map Editor Settings" placement="left-top">
          <sl-button size="medium" variant="warning" outline id="editorPrefsBtn">
            <span class="material-icons">tune</span>
          </sl-button>
        </sl-tooltip>
        <sl-tooltip content="3D Preferences" placement="left-top">
          <sl-button size="medium" variant="warning" outline id="preferencesBtn">
            <span class="material-icons">settings</span>
          </sl-button>
        </sl-tooltip>
        <sl-tooltip content="Resource Manager" placement="left-top">
          <sl-button size="medium" variant="success" outline id="resourceManagerBtn" style="display: none;">
            <span class="material-icons">palette</span>
          </sl-button>
        </sl-tooltip>
        <sl-tooltip content="View in 3D" placement="left-top">
          <sl-button size="medium" variant="danger" outline id="create3d">
            <span class="material-icons">view_in_ar</span>
          </sl-button>
        </sl-tooltip>
        <sl-tooltip content="Help Guide" placement="left-top">
          <sl-button size="medium" variant="primary" outline id="helpBtn">
            <span class="material-icons">help_outline</span>
          </sl-button>
        </sl-tooltip>
      </sl-button-group>
    </header>

    <!--Sidebar for Area, Markers and LayerPanel-->
    <aside class="sidebar">
      <div class="sidebar-content">
        <!-- Area tools-->
        <div class="tool-section">
          <div class="tool-section-title">Tools</div>
          <div class="tool-grid">
            <div class="tool-button" id="selectTool" data-tooltip="Rectangle [R]">
              <span class="material-icons">crop_square</span>
            </div>
            <div class="tool-button" id="circleTool" data-tooltip="Circle [C]">
              <span class="material-icons">circle</span>
            </div>
            <div class="tool-button" id="wallTool" data-tooltip="Create Polygon/Wall [W]">
              <span class="material-icons">account_tree</span>
            </div>
            <div class="tool-button" id="screenshotTool" data-tooltip="Take Screenshot [F12]">
              <span class="material-icons">photo_camera</span>
            </div>
          </div>
        </div>

        <div class="tool-divider"></div>
        <!-- Marker tools-->
        <div class="tool-section">
          <div class="tool-section-title">Map Markers</div>
          <div class="tool-grid marker-tools">
            <div class="tool-button" id="playerStartTool" data-tooltip="Player Start">
              <span class="material-icons">person_pin_circle</span>
            </div>
            <div class="tool-button" id="encounterTool" data-tooltip="Add Encounter">
              <span class="material-icons">local_fire_department</span>
            </div>
            <div class="tool-button" id="treasureTool" data-tooltip="Add Treasure">
              <span class="material-icons">workspace_premium</span>
            </div>
            <div class="tool-button" id="trapTool" data-tooltip="Add Trap">
              <span class="material-icons">warning</span>
            </div>
            <div class="tool-button" id="teleportTool" data-tooltip="Add Teleport">
              <span class="material-icons">swap_calls</span>
            </div>
            <div class="tool-button" id="doorTool" data-tooltip="Add Door">
              <span class="material-icons">door_front</span>
            </div>
            <div class="tool-button" id="propTool" data-tooltip="Add Prop">
              <span class="material-icons">category</span>
            </div>
            <div class="tool-button" id="splashArtTool" data-tooltip="Add Splash Art">
              <span class="material-icons">add_photo_alternate</span>
            </div>
          </div>
        </div>

        <div class="tool-divider"></div>
        <!--LayerPanel-->
        <div class="layers-panel">
          <div class="tool-section-title">Rooms</div>
          <div class="layers-list" id="layersList">
            <!-- Room layers will be added here dynamically -->
          </div>
        </div>
      </div>
    </aside>

    <main class="canvas-container">
      <!-- Update the canvasWrapper div with a background image -->
      <div id="canvasWrapper"
        style="position: relative; width: 100%; height: 100%; overflow: auto; background-image: url('images/texture_07.png'); background-repeat: repeat;">
        <canvas id="mainCanvas"></canvas>
      </div>
    </main>
    </div>

</body>
</html>